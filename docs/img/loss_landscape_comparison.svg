<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500" width="800" height="500">
  <defs>
    <style>
      .axis { stroke: black; stroke-width: 2; }
      .grid { stroke: #e0e0e0; stroke-width: 0.5; }
      .label { font-family: Arial, sans-serif; font-size: 12px; fill: black; }
      .title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: black; }
      .legend-text { font-family: Arial, sans-serif; font-size: 11px; fill: black; }
    </style>
  </defs>
  
  <!-- Title -->
  <text x="400" y="25" text-anchor="middle" class="title">Loss Function Dynamics: How Gradient Strength Varies with Steering Success</text>
  
  <!-- Background regions -->
  <rect x="100" y="60" width="300" height="370" fill="#ffcccc" opacity="0.2"/>
  <rect x="400" y="60" width="300" height="370" fill="#ccffcc" opacity="0.2"/>
  
  <!-- Grid lines -->
  <line x1="100" y1="430" x2="700" y2="430" class="axis"/>
  <line x1="100" y1="60" x2="100" y2="430" class="axis"/>
  
  <!-- X-axis ticks and labels -->
  <line x1="100" y1="430" x2="100" y2="435" class="axis"/>
  <text x="100" y="450" text-anchor="middle" class="label">-5</text>
  
  <line x1="220" y1="430" x2="220" y2="435" class="axis"/>
  <text x="220" y="450" text-anchor="middle" class="label">-2.5</text>
  
  <line x1="400" y1="430" x2="400" y2="435" class="axis"/>
  <text x="400" y="450" text-anchor="middle" class="label">0</text>
  
  <line x1="580" y1="430" x2="580" y2="435" class="axis"/>
  <text x="580" y="450" text-anchor="middle" class="label">2.5</text>
  
  <line x1="700" y1="430" x2="700" y2="435" class="axis"/>
  <text x="700" y="450" text-anchor="middle" class="label">5</text>
  
  <!-- Y-axis ticks and labels -->
  <line x1="95" y1="430" x2="100" y2="430" class="axis"/>
  <text x="85" y="435" text-anchor="end" class="label">-5</text>
  
  <line x1="95" y1="337.5" x2="100" y2="337.5" class="axis"/>
  <text x="85" y="342.5" text-anchor="end" class="label">-2.5</text>
  
  <line x1="95" y1="245" x2="100" y2="245" class="axis"/>
  <text x="85" y="250" text-anchor="end" class="label">0</text>
  
  <line x1="95" y1="152.5" x2="100" y2="152.5" class="axis"/>
  <text x="85" y="157.5" text-anchor="end" class="label">2.5</text>
  
  <line x1="95" y1="60" x2="100" y2="60" class="axis"/>
  <text x="85" y="65" text-anchor="end" class="label">5</text>
  
  <!-- Axis labels -->
  <text x="400" y="475" text-anchor="middle" class="label" font-weight="bold">proj_diff (projection difference)</text>
  <text x="30" y="245" text-anchor="middle" class="label" font-weight="bold" transform="rotate(-90 30 245)">-loss (higher = better)</text>
  
  <!-- Vertical dashed line at x=0 -->
  <line x1="400" y1="60" x2="400" y2="430" stroke="black" stroke-width="1" stroke-dasharray="5,5"/>
  <text x="405" y="75" class="label" font-size="10">ref performance</text>
  
  <!-- Region labels -->
  <text x="250" y="450" text-anchor="middle" class="label" fill="#cc0000" font-size="10">AGAINST RLHF</text>
  <text x="550" y="450" text-anchor="middle" class="label" fill="#00aa00" font-size="10">WITH RLHF</text>
  
  <!-- Loss curves -->
  <!-- 1. softpl_strong_up (green): -softplus(x) -->
  <path d="M 100,430 C 160,430 220,430 280,430 C 340,429 370,427 400,423 C 430,418 460,410 490,395 C 520,375 550,350 580,318 C 610,280 640,235 670,185 L 700,140" 
        fill="none" stroke="#00aa00" stroke-width="2.5"/>
  
  <!-- 2. logsig_weak_up (blue, dashed): -logsigmoid(0.1*(x - 1)) -->
  <path d="M 100,350 C 160,340 220,325 280,305 C 340,280 370,268 400,255 C 430,242 460,230 490,220 C 520,212 550,207 580,203 C 610,200 640,198 670,197 L 700,196" 
        fill="none" stroke="#0066cc" stroke-width="2" stroke-dasharray="8,4"/>
  
  <!-- 3. tanh_sym (orange, dotted): tanh(x) -->
  <path d="M 100,385 C 160,375 220,360 280,340 C 340,315 370,295 400,275 C 430,255 460,235 490,215 C 520,195 550,175 580,160 C 610,148 640,140 670,135 L 700,132" 
        fill="none" stroke="#ff8800" stroke-width="2" stroke-dasharray="2,3"/>
  
  <!-- 4. focal_balanced (purple, dash-dot): -(1-sigmoid(x))^2 * logsigmoid(x) -->
  <path d="M 100,400 C 160,390 220,375 280,355 C 340,330 370,310 400,288 C 430,265 460,242 490,225 C 520,215 550,210 580,207 C 610,205 640,204 670,203.5 L 700,203" 
        fill="none" stroke="#aa00aa" stroke-width="2" stroke-dasharray="10,3,2,3"/>
  
  <!-- 5. logsig_dpo (gray, thin): -logsigmoid(0.1*x) -->
  <path d="M 100,365 C 160,355 220,340 280,320 C 340,295 370,280 400,265 C 430,250 460,235 490,220 C 520,205 550,192 580,182 C 610,173 640,167 670,163 L 700,160" 
        fill="none" stroke="#888888" stroke-width="1.5"/>
  
  <!-- Legend -->
  <g transform="translate(500, 80)">
    <rect x="0" y="0" width="180" height="130" fill="white" stroke="black" stroke-width="1" opacity="0.9"/>
    
    <line x1="10" y1="15" x2="40" y2="15" stroke="#00aa00" stroke-width="2.5"/>
    <text x="45" y="19" class="legend-text">Strong upside ↑, Weak downside ↓</text>
    
    <line x1="10" y1="35" x2="40" y2="35" stroke="#0066cc" stroke-width="2" stroke-dasharray="8,4"/>
    <text x="45" y="39" class="legend-text">Saturates at margin</text>
    
    <line x1="10" y1="55" x2="40" y2="55" stroke="#ff8800" stroke-width="2" stroke-dasharray="2,3"/>
    <text x="45" y="59" class="legend-text">Symmetric ±</text>
    
    <line x1="10" y1="75" x2="40" y2="75" stroke="#aa00aa" stroke-width="2" stroke-dasharray="10,3,2,3"/>
    <text x="45" y="79" class="legend-text">Focus on hard ⚖</text>
    
    <line x1="10" y1="95" x2="40" y2="95" stroke="#888888" stroke-width="1.5"/>
    <text x="45" y="99" class="legend-text">DPO baseline</text>
  </g>
</svg>
